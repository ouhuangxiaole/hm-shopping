{"version":3,"file":"js/865.c68fc132.js","mappings":"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","sources":["webpack://hm-shopping/./src/views/prodetail/index.vue","webpack://hm-shopping/src/views/prodetail/index.vue","webpack://hm-shopping/./src/views/prodetail/index.vue?f133","webpack://hm-shopping/./src/views/prodetail/index.vue?3c54","webpack://hm-shopping/./src/api/product.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"prodetail\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"title\":\"商品详情\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),_c('van-swipe',{attrs:{\"autoplay\":3000},on:{\"change\":_vm.onChange},scopedSlots:_vm._u([{key:\"indicator\",fn:function(){return [_c('div',{staticClass:\"custom-indicator\"},[_vm._v(\" \"+_vm._s(_vm.currIndex + 1)+\" / \"+_vm._s(_vm.images.length)+\" \")])]},proxy:true}])},_vm._l((_vm.images),function(image){return _c('van-swipe-item',{key:image.file_id},[_c('img',{attrs:{\"src\":image.external_url,\"title\":image.file_name,\"alt\":image.file_name}})])}),1),_c('div',{staticClass:\"info\"},[_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"price\"},[_c('span',{staticClass:\"now\"},[_vm._v(\"￥\"+_vm._s(_vm.detail.goods_price_min))]),_c('span',{staticClass:\"oldprice\"},[_vm._v(\"￥\"+_vm._s(_vm.detail.goods_price_max))])]),_c('div',{staticClass:\"sellcount\"},[_vm._v(\"已售\"+_vm._s(_vm.detail.goods_sales)+\"件\")])]),_c('div',{staticClass:\"msg text-ellipsis-2\",domProps:{\"innerHTML\":_vm._s(_vm.detail.goods_name)}}),_c('div',{staticClass:\"service\"},[_c('div',{staticClass:\"left-words\"},_vm._l((_vm.service),function(sve){return _c('span',{key:sve.service_id,attrs:{\"title\":sve.summary}},[_c('van-icon',{attrs:{\"name\":\"passed\"}}),_vm._v(\" \"+_vm._s(sve.name)+\" \")],1)}),0),_c('div',{staticClass:\"right-icon\"},[_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)])]),_c('div',{staticClass:\"comment\"},[_c('div',{staticClass:\"comment-title\"},[_c('div',{staticClass:\"left\"},[_vm._v(\" 商品评价 (\"+_vm._s(_vm.comment.total)+\"条) \")]),_c('div',{staticClass:\"right\"},[_vm._v(\" 查看更多 \"),_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)]),_c('div',{staticClass:\"comment-list\"},_vm._l((_vm.comment.list),function(cmt){return _c('div',{key:cmt.comment_id,staticClass:\"comment-item\"},[_c('div',{staticClass:\"top\"},[_c('img',{attrs:{\"src\":cmt.user.avatar_url}}),_c('div',{staticClass:\"name\",domProps:{\"innerHTML\":_vm._s(cmt.user.nick_name)}}),_c('van-rate',{attrs:{\"size\":16,\"value\":Math.floor(Math.random() * 5),\"color\":\"#ffd21e\",\"void-icon\":\"star\",\"void-color\":\"#eee\"}})],1),_c('div',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(cmt.content)}}),_c('div',{staticClass:\"time\",domProps:{\"innerHTML\":_vm._s(cmt.create_time)}})])}),0)]),_vm._m(0),_c('div',{staticClass:\"footer\"},[_c('div',{staticClass:\"icon-home\",on:{\"click\":function($event){return _vm.$router.push('/')}}},[_c('van-icon',{attrs:{\"name\":\"wap-home-o\"}}),_c('span',[_vm._v(\"首页\")])],1),_c('div',{staticClass:\"icon-cart\"},[(_vm.cartTotal)?_c('span',{staticClass:\"num\",domProps:{\"innerHTML\":_vm._s(_vm.cartTotal)}}):_vm._e(),_c('van-icon',{attrs:{\"name\":\"shopping-cart-o\"}}),_c('span',[_vm._v(\"购物车\")])],1),_c('div',{staticClass:\"btn-add\",on:{\"click\":function($event){return _vm.pannel('cart')}}},[_vm._v(\"加入购物车\")]),_c('div',{staticClass:\"btn-buy\",on:{\"click\":function($event){return _vm.pannel('buy')}}},[_vm._v(\"立刻购买\")])]),_c('van-action-sheet',{attrs:{\"title\":_vm.mode === 'cart' ? '加入购物车' : '立刻购买'},model:{value:(_vm.showPannel),callback:function ($$v) {_vm.showPannel=$$v},expression:\"showPannel\"}},[_c('div',{staticClass:\"product\"},[_c('div',{staticClass:\"product-title\"},[_c('div',{staticClass:\"left\"},[_c('img',{attrs:{\"src\":_vm.detail.goods_image,\"alt\":\"\"}})]),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"price\"},[_c('span',[_vm._v(\"¥\")]),_c('span',{staticClass:\"nowprice\",domProps:{\"innerHTML\":_vm._s(_vm.detail.goods_price_min )}})]),_c('div',{staticClass:\"count\"},[_c('span',[_vm._v(\"库存\")]),_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.detail.stock_total)}})])])]),_c('div',{staticClass:\"num-box\"},[_c('span',[_vm._v(\"数量\")]),_c('van-stepper',{attrs:{\"disabled\":0 === _vm.detail.stock_total},model:{value:(_vm.count),callback:function ($$v) {_vm.count=$$v},expression:\"count\"}})],1),(_vm.detail.stock_total)?_c('div',{staticClass:\"showbtn\"},[(_vm.mode === 'cart')?_c('div',{staticClass:\"btn\",on:{\"click\":_vm.loginAuthOptions}},[_vm._v(\"加入购物车\")]):_c('div',{staticClass:\"btn now\",on:{\"click\":_vm.loginAuthOptions}},[_vm._v(\"立刻购买\")])]):_c('div',{staticClass:\"btn-none\"},[_vm._v(\"该商品已抢完\")])])])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"desc\"},[_c('img',{attrs:{\"src\":\"https://uimgproxy.suning.cn/uimg1/sop/commodity/kHgx21fZMWwqirkMhawkAw.jpg\",\"alt\":\"\"}}),_c('img',{attrs:{\"src\":\"https://uimgproxy.suning.cn/uimg1/sop/commodity/0rRMmncfF0kGjuK5cvLolg.jpg\",\"alt\":\"\"}}),_c('img',{attrs:{\"src\":\"https://uimgproxy.suning.cn/uimg1/sop/commodity/2P04A4Jn0HKxbKYSHc17kw.jpg\",\"alt\":\"\"}}),_c('img',{attrs:{\"src\":\"https://uimgproxy.suning.cn/uimg1/sop/commodity/MT4k-mPd0veQXWPPO5yTIw.jpg\",\"alt\":\"\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"prodetail\">\r\n    <!-- 头部 -->\r\n    <van-nav-bar\r\n      fixed\r\n      title=\"商品详情\"\r\n      left-arrow\r\n      @click-left=\"$router.back()\"\r\n    />\r\n\r\n    <!-- 轮播图 -->\r\n    <van-swipe :autoplay=\"3000\" @change=\"onChange\">\r\n      <van-swipe-item\r\n        v-for=\"image in images\"\r\n        :key=\"image.file_id\"\r\n      >\r\n        <img\r\n          :src=\"image.external_url\"\r\n          :title=\"image.file_name\"\r\n          :alt=\"image.file_name\"\r\n        />\r\n      </van-swipe-item>\r\n\r\n      <!-- 轮播图右下角角标 -->\r\n      <template #indicator>\r\n        <div class=\"custom-indicator\">\r\n          {{ currIndex + 1 }} / {{ images.length }}\r\n        </div>\r\n      </template>\r\n    </van-swipe>\r\n\r\n    <!-- 商品说明 -->\r\n    <div class=\"info\">\r\n      <div class=\"title\">\r\n        <div class=\"price\">\r\n          <span class=\"now\">￥{{ detail.goods_price_min }}</span>\r\n          <span class=\"oldprice\">￥{{ detail.goods_price_max }}</span>\r\n        </div>\r\n        <div class=\"sellcount\">已售{{ detail.goods_sales }}件</div>\r\n      </div>\r\n      <div class=\"msg text-ellipsis-2\" v-html=\"detail.goods_name\"></div>\r\n\r\n      <div class=\"service\">\r\n        <div class=\"left-words\">\r\n          <span\r\n            v-for=\"sve in service\"\r\n            :key=\"sve.service_id\"\r\n            :title=\"sve.summary\"\r\n          >\r\n            <van-icon name=\"passed\" />\r\n            {{ sve.name }}\r\n          </span>\r\n        </div>\r\n        <div class=\"right-icon\">\r\n          <van-icon name=\"arrow\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 商品评价 -->\r\n    <div class=\"comment\">\r\n      <div class=\"comment-title\">\r\n        <div class=\"left\">\r\n          商品评价 ({{ comment.total }}条)\r\n        </div>\r\n        <div class=\"right\">\r\n          查看更多\r\n          <van-icon name=\"arrow\" />\r\n        </div>\r\n      </div>\r\n      <!-- 评论列表 -->\r\n      <div class=\"comment-list\">\r\n        <div class=\"comment-item\"\r\n          v-for=\"cmt in comment.list\"\r\n          :key=\"cmt.comment_id\"\r\n        >\r\n          <div class=\"top\">\r\n            <img :src=\"cmt.user.avatar_url\">\r\n            <div class=\"name\" v-html=\"cmt.user.nick_name\"></div>\r\n            <!-- 评分 -->\r\n            <van-rate\r\n              :size=\"16\"\r\n              :value=\"Math.floor(Math.random() * 5)\"\r\n              color=\"#ffd21e\"\r\n              void-icon=\"star\"\r\n              void-color=\"#eee\"\r\n            />\r\n          </div>\r\n          <div class=\"content\" v-html=\"cmt.content\"></div>\r\n          <div class=\"time\" v-html=\"cmt.create_time\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 商品描述 -->\r\n    <div class=\"desc\">\r\n      <img src=\"https://uimgproxy.suning.cn/uimg1/sop/commodity/kHgx21fZMWwqirkMhawkAw.jpg\" alt=\"\">\r\n      <img src=\"https://uimgproxy.suning.cn/uimg1/sop/commodity/0rRMmncfF0kGjuK5cvLolg.jpg\" alt=\"\">\r\n      <img src=\"https://uimgproxy.suning.cn/uimg1/sop/commodity/2P04A4Jn0HKxbKYSHc17kw.jpg\" alt=\"\">\r\n      <img src=\"https://uimgproxy.suning.cn/uimg1/sop/commodity/MT4k-mPd0veQXWPPO5yTIw.jpg\" alt=\"\">\r\n    </div>\r\n\r\n    <!-- 底部 -->\r\n    <div class=\"footer\">\r\n      <div class=\"icon-home\" @click=\"$router.push('/')\">\r\n        <van-icon name=\"wap-home-o\" />\r\n        <span>首页</span>\r\n      </div>\r\n      <div class=\"icon-cart\">\r\n        <span\r\n          class=\"num\"\r\n          v-if=\"cartTotal\"\r\n          v-html=\"cartTotal\"\r\n        ></span>\r\n        <van-icon name=\"shopping-cart-o\" />\r\n        <span>购物车</span>\r\n      </div>\r\n      <div class=\"btn-add\" @click=\"pannel('cart')\">加入购物车</div>\r\n      <div class=\"btn-buy\" @click=\"pannel('buy')\">立刻购买</div>\r\n    </div>\r\n\r\n    <!-- 弹窗 -->\r\n    <van-action-sheet\r\n      v-model=\"showPannel\"\r\n      :title=\"mode === 'cart' ? '加入购物车' : '立刻购买'\"\r\n    >\r\n      <div class=\"product\">\r\n        <div class=\"product-title\">\r\n          <div class=\"left\">\r\n            <img :src=\"detail.goods_image\" alt=\"\">\r\n          </div>\r\n          <div class=\"right\">\r\n            <div class=\"price\">\r\n              <span>¥</span>\r\n              <span class=\"nowprice\" v-html=\"detail.goods_price_min \"></span>\r\n            </div>\r\n            <div class=\"count\">\r\n              <span>库存</span>\r\n              <span v-html=\"detail.stock_total\"></span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n          <div class=\"num-box\">\r\n            <span>数量</span>\r\n            <van-stepper v-model=\"count\" :disabled=\"0 === detail.stock_total\" />\r\n          </div>\r\n          <div class=\"showbtn\" v-if=\"detail.stock_total\">\r\n            <div\r\n              class=\"btn\"\r\n              v-if=\"mode === 'cart'\"\r\n              @click=\"loginAuthOptions\"\r\n            >加入购物车</div>\r\n            <div\r\n              class=\"btn now\"\r\n              v-else\r\n              @click=\"loginAuthOptions\"\r\n            >立刻购买</div>\r\n          </div>\r\n          <div class=\"btn-none\" v-else>该商品已抢完</div>\r\n        </div>\r\n    </van-action-sheet>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { prodapi } from '@/api/product'\r\nimport { cartapi } from '@/api/cart'\r\nexport default {\r\n  name: 'ProDetail',\r\n  data () {\r\n    return {\r\n      detail: {},\r\n      images: [],\r\n      comment: [],\r\n      service: [],\r\n      // 当前轮播图下标\r\n      currIndex: 0,\r\n      // 点击的类型\r\n      mode: 'cart',\r\n      // 是否弹窗\r\n      showPannel: false,\r\n      // 购买或者添加购物车的数量\r\n      count: 1,\r\n      cartTotal: 0\r\n    }\r\n  },\r\n  computed: {\r\n    totalPrice () {\r\n      return this.count * this.detail.goods_price_min\r\n    }\r\n  },\r\n  methods: {\r\n    onChange (index) {\r\n      this.currIndex = index\r\n    },\r\n    // 购买/加入购物车弹窗\r\n    pannel (mode) {\r\n      // console.log('addFunc')\r\n      this.mode = mode\r\n      this.showPannel = true\r\n    },\r\n    // 添加购物车\r\n    async addCart () {\r\n      const res = await cartapi.addCart(\r\n        this.goodsId,\r\n        this.count,\r\n        this.detail.skuList[0].goods_sku_id\r\n      )\r\n      // console.log(res.data)\r\n      // 关闭弹窗 显示数据 给提示\r\n      this.$toast.success('添加成功')\r\n      this.showPannel = false\r\n      this.cartTotal = res.data.cartTotal\r\n    },\r\n    // 立刻购买\r\n    goBuyNow () {\r\n      // console.log(this.detail)\r\n      this.$router.push({\r\n        path: '/pay',\r\n        query: {\r\n          mode: 'buyNow',\r\n          data: {\r\n            title: this.detail.goods_name,\r\n            image: this.detail.goods_image,\r\n            count: this.count,\r\n            price: this.detail.goods_price_min,\r\n            total: this.count,\r\n            totalPrice: this.totalPrice,\r\n            info: {\r\n              goodsId: String(this.detail.goods_id),\r\n              goodsNum: this.count,\r\n              goodsSkuId: this.detail.skuList[0].goods_sku_id\r\n            }\r\n          }\r\n        }\r\n      })\r\n    },\r\n    // 需要登陆才能进行的行为\r\n    async loginAuthOptions () {\r\n      const token = this.$store.state.user.userInfo.token\r\n      // console.log(token)\r\n      // 一般此时需要后端判断token是否过期\r\n      if (!token) {\r\n        this.$confirm(\r\n          this.$route.fullPath,\r\n          () => {\r\n            this.showPannel = false\r\n          }\r\n        )\r\n        return\r\n      }\r\n      // console.log('进行加入购物车操作')\r\n      if (this.mode === 'cart') {\r\n        this.addCart()\r\n      } else {\r\n        this.goBuyNow()\r\n      }\r\n    }\r\n  },\r\n  async created () {\r\n    // 获取商品ID\r\n    this.goodsId = this.$route.params.id\r\n    // 获取商品详细信息\r\n    const det = await prodapi.getDetail(this.goodsId)\r\n    this.detail = det.data.detail\r\n    this.images = det.data.detail.goods_images\r\n    // 获取商品评论\r\n    const cmt = await prodapi.getComment(this.goodsId)\r\n    this.comment = cmt.data\r\n    // 获取购物车总数\r\n    this.cartTotal = (await cartapi.getTotal()).data.cartTotal\r\n    // 获取商品服务\r\n    this.service = (await prodapi.getService(this.goodsId)).data.list\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.prodetail {\r\n  padding-top: 46px;\r\n  ::v-deep .van-icon-arrow-left {\r\n    color: #333;\r\n  }\r\n  img {\r\n    display: block;\r\n    width: 100%;\r\n  }\r\n  .custom-indicator {\r\n    position: absolute;\r\n    right: 10px;\r\n    bottom: 10px;\r\n    padding: 5px 10px;\r\n    font-size: 12px;\r\n    background: rgba(0, 0, 0, 0.1);\r\n    border-radius: 15px;\r\n  }\r\n  .desc {\r\n    width: 100%;\r\n    overflow: scroll;\r\n    ::v-deep img {\r\n      display: block;\r\n      width: 100%!important;\r\n    }\r\n  }\r\n  .info {\r\n    padding: 10px;\r\n  }\r\n  .title {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    .now {\r\n      color: #fa2209;\r\n      font-size: 20px;\r\n    }\r\n    .oldprice {\r\n      color: #959595;\r\n      font-size: 16px;\r\n      text-decoration: line-through;\r\n      margin-left: 5px;\r\n    }\r\n    .sellcount {\r\n      color: #959595;\r\n      font-size: 16px;\r\n      position: relative;\r\n      top: 4px;\r\n    }\r\n  }\r\n  .msg {\r\n    font-size: 16px;\r\n    line-height: 24px;\r\n    margin-top: 5px;\r\n  }\r\n  .service {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    line-height: 40px;\r\n    margin-top: 10px;\r\n    font-size: 16px;\r\n    background-color: #fafafa;\r\n    .left-words {\r\n      span {\r\n        margin-right: 10px;\r\n      }\r\n      .van-icon {\r\n        margin-right: 4px;\r\n        color: #fa2209;\r\n      }\r\n    }\r\n  }\r\n\r\n  .comment {\r\n    padding: 10px;\r\n  }\r\n  .comment-title {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    .right {\r\n      color: #959595;\r\n    }\r\n  }\r\n\r\n  .comment-item {\r\n    font-size: 16px;\r\n    line-height: 30px;\r\n    .top {\r\n      height: 30px;\r\n      display: flex;\r\n      align-items: center;\r\n      margin-top: 20px;\r\n      img {\r\n        width: 20px;\r\n        height: 20px;\r\n      }\r\n      .name {\r\n        margin: 0 10px;\r\n      }\r\n    }\r\n    .content {\r\n      max-width: 100vw;\r\n    }\r\n    .time {\r\n      color: #999;\r\n    }\r\n  }\r\n\r\n  .footer {\r\n    position: fixed;\r\n    left: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    height: 55px;\r\n    background-color: #fff;\r\n    border-top: 1px solid #ccc;\r\n    display: flex;\r\n    justify-content: space-evenly;\r\n    align-items: center;\r\n    .icon-cart {\r\n      position: relative;\r\n      padding: 0 6px;\r\n      .num {\r\n        z-index: 999;\r\n        position: absolute;\r\n        top: -2px;\r\n        right: 0;\r\n        min-width: 16px;\r\n        // min-height: 16px;\r\n        // padding: 0 4px;\r\n        color: #fff;\r\n        text-align: center;\r\n        background-color: #ee0a24;\r\n        border-radius: 50%;\r\n      }\r\n    }\r\n    .icon-home, .icon-cart {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      justify-content: center;\r\n      font-size: 14px;\r\n      .van-icon {\r\n        font-size: 24px;\r\n      }\r\n      span {\r\n        font-size: 10px;\r\n      }\r\n    }\r\n    .btn-add,\r\n    .btn-buy {\r\n      height: 36px;\r\n      line-height: 36px;\r\n      width: 120px;\r\n      border-radius: 18px;\r\n      background-color: #ffa900;\r\n      text-align: center;\r\n      color: #fff;\r\n      font-size: 14px;\r\n    }\r\n    .btn-buy {\r\n      background-color: #fe5630;\r\n    }\r\n  }\r\n}\r\n\r\n.tips {\r\n  padding: 10px;\r\n}\r\n\r\n.product {\r\n  .product-title {\r\n    display: flex;\r\n    .left {\r\n      img {\r\n        width: 90px;\r\n        height: 90px;\r\n      }\r\n      margin: 10px;\r\n    }\r\n    .right {\r\n      flex: 1;\r\n      padding: 10px;\r\n      .price {\r\n        font-size: 14px;\r\n        color: #fe560a;\r\n        .nowprice {\r\n          font-size: 24px;\r\n          margin: 0 5px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .num-box {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding: 10px;\r\n    align-items: center;\r\n  }\r\n\r\n  .btn, .btn-none {\r\n    height: 40px;\r\n    line-height: 40px;\r\n    margin: 20px;\r\n    border-radius: 20px;\r\n    text-align: center;\r\n    color: rgb(255, 255, 255);\r\n    background-color: rgb(255, 148, 2);\r\n  }\r\n  .btn.now {\r\n    background-color: #fe5630;\r\n  }\r\n  .btn-none {\r\n    background-color: #cccccc;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4d1d28f5&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4d1d28f5&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d1d28f5\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/requests'\r\n\r\nexport const prodapi = {\r\n  // 获取商品列表\r\n  getList (keyword, sortType) {\r\n    return request({\r\n      method: 'GET',\r\n      url: '/goods/list',\r\n      query: {\r\n        sortType,\r\n        categoryId: '0',\r\n        goodsName: keyword,\r\n        page: 1\r\n      }\r\n    })\r\n  },\r\n  // 获取商品详细信息\r\n  getDetail (id) {\r\n    return request({\r\n      method: 'GET',\r\n      url: '/goods/detail',\r\n      params: {\r\n        goodsId: id\r\n      }\r\n    })\r\n  },\r\n  // 获取商品评论\r\n  getComment (id, count = 5) {\r\n    return request({\r\n      method: 'GET',\r\n      url: '/comment/listRows',\r\n      params: {\r\n        goodsId: id,\r\n        limit: count\r\n      }\r\n    })\r\n  },\r\n  // 获取商品保障服务\r\n  getService (id) {\r\n    return request({\r\n      method: 'GET',\r\n      url: '/goods.service/list',\r\n      params: {\r\n        goodsId: id\r\n      }\r\n    })\r\n  }\r\n}\r\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","back","onChange","scopedSlots","_u","key","fn","_v","_s","currIndex","images","length","proxy","_l","image","file_id","external_url","file_name","detail","goods_price_min","goods_price_max","goods_sales","domProps","goods_name","service","sve","service_id","summary","name","comment","total","list","cmt","comment_id","user","avatar_url","nick_name","Math","floor","random","content","create_time","_m","push","cartTotal","_e","pannel","mode","model","value","showPannel","callback","$$v","expression","goods_image","stock_total","count","loginAuthOptions","staticRenderFns","data","computed","totalPrice","methods","index","addCart","res","cartapi","goodsId","skuList","goods_sku_id","$toast","success","goBuyNow","path","query","title","price","info","String","goods_id","goodsNum","goodsSkuId","token","$store","state","userInfo","$confirm","$route","fullPath","created","params","id","det","prodapi","getDetail","goods_images","getComment","getTotal","getService","component","getList","keyword","sortType","request","method","url","categoryId","goodsName","page","limit"],"sourceRoot":""}